import { TenantPlugin } from '@teliagen/plugin-tenant';
import { User } from '@teliagen/plugin-identity/modules/app/index.js';

export const tenantPlugin = TenantPlugin({
name: 'tenant',

// Foreign key in tenant-aware entities
foreignKey: 'tenantId',

// Link to User entity from identity
entities: {
User: User as any,
},

// How to resolve tenant from request
resolver: {
type: 'header',
key: 'x-tenant-id'
}
});